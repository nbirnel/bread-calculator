#!/usr/bin/env ruby

require 'bread_calculator'
require 'pp'

@format = 'formula'
# Boilerplate for adding flags.

loop { case ARGV[0]
  when /-summary/ then @format = 'summary'; ARGV.shift; break
  when /--/ then ARGV.shift; break
  when /^-/ then usage("Unknown option: #{ARGV[0].inspect}")
  else break
end; }

ARGV.each do |arg|
  parser = BreadCalculator::Parser.new arg
  r = parser.parse(arg)
  output = eval("r.bakers_percent_#{@format}")
  pp output
end
